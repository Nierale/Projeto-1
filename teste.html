<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Tooltip ao Selecionar Texto</title>
    <style>
        .tooltip {
            position: absolute;
            display: none;
            background: #333;
            color: #fff;
            padding: 6px 10px;
            border-radius: 4px;
            font-size: 14px;
            z-index: 1000;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>

<body>
    <p>Selecione qualquer parte deste texto com o mouse para ver a tooltip aparecer com uma ação.</p>

    <div id="tooltip" class="tooltip">
        <a id="link-tooltip" href="#" target="_blank" style="color: white;">Ação</a>
    </div>

    <script>
        const tooltip = document.getElementById("tooltip");
        const tooltipLink = document.getElementById("link-tooltip");

        document.addEventListener("mouseup", (e) => {
            const selection = window.getSelection();
            const selectedText = selection.toString().trim();

            if (selectedText.length > 0) {
                const range = selection.getRangeAt(0);
                const rect = range.getBoundingClientRect();

                // Define o link com base no texto selecionado (exemplo)
                tooltipLink.href = `https://www.google.com/search?q=${encodeURIComponent(selectedText)}`;
                tooltipLink.textContent = `Buscar "${selectedText}"`;

                // Posiciona a tooltip perto da seleção
                tooltip.style.left = window.scrollX + rect.left + "px";
                tooltip.style.top = window.scrollY + rect.bottom + "px";
                tooltip.style.display = "block";
            } else {
                tooltip.style.display = "none";
            }
        });

        document.addEventListener("mousedown", (e) => {
            if (!tooltip.contains(e.target)) {
                tooltip.style.display = "none";
            }
        });
    </script>
</body>

</html>